âš™ï¸ Part One â€” General Improvements and Fixes in the Configuration Module

Please apply the following updates and functional fixes across all configuration modules before adding new administrative features:

ğŸ”¹ EDIT FUNCTIONALITY (Partial Updates)

Currently, when editing a record in any module, the system requires modifying all fields.
It should allow partial updates, letting the user change only the fields they need.

Requirements per module:
1ï¸âƒ£ Users:

Allow editing of individual fields (name, username, role, or password).

Do not require all fields to be filled to save changes.

2ï¸âƒ£ Chains:

Enable full editing (name and description).

3ï¸âƒ£ Zones:

Editing should not require changing the associated chain.

Only update the chain if a new one is selected.

4ï¸âƒ£ Stores:

Allow editing of individual fields (name, address, city, longitude, latitude).

Changing coordinates should not require reselecting chain, zone, or store name.

5ï¸âƒ£ Products:

Allow independent editing of name, color, or icon.

Do not force all fields to be modified each time.

ğŸ”¹ ASSIGNMENTS

6ï¸âƒ£ Userâ€“Store Assignments:

Allow assigning multiple stores to the same user in one action.

Previously assigned stores must remain checked when reopening the modal.

Adding new stores must not remove existing ones.

ğŸ”¹ VALIDATIONS AND OPTIONAL FIELDS

7ï¸âƒ£ Case-insensitive validation:

In all Configuration modules (Users, Chains, Zones, Stores, and Products), all comparisons and validations must be case-insensitive.

This applies to names and any unique text fields.

Example: â€œMonterreyâ€ and â€œmonterreyâ€ should be treated as the same value and considered duplicates if repeated.

8ï¸âƒ£ Optional email field in Users:

The email field should no longer be required when creating or updating a user.

The form must validate only the following fields:

Username

Name

Password

Role

If an email is entered, validate the format, but allow it to be empty.

ğŸ”¹ SUPPORTING TABLES

9ï¸âƒ£ New or required tables:

Ensure these tables exist or create them as needed:

user_store_assignments â†’ userâ€“store relationships.

backup_logs â†’ database backup history.

promoter_visits â†’ future store visits tracking (user, store, coordinates, check-in/out, notes).

All tables should include appropriate foreign keys referencing their main entities.

ğŸ”¹ PROJECT ORGANIZATION

ğŸ”Ÿ Folder structure:

Reorganize all files into a clean, professional folder layout:

/client â†’ frontend (components, pages, hooks, utils).

/server â†’ backend (routes, controllers, models, middlewares, backups).

Update imports as needed without breaking functionality.

âš™ï¸ Goal of Part One:

Make all configuration modules fully editable with flexible validation.

Support multiple store assignments per user.

Prepare all tables for upcoming features (visits and backups).

Keep the project clean and well organized.

âš™ï¸ Part Two â€” New â€œData Baseâ€ Tab (after completing Part One)

Once all the previous updates are done and working properly, add a new tab under Configuration called â€œData Baseâ€, visible only to admin and superadmin users.

ğŸ“¦ Main Functionality

Add a button labeled â€œğŸ“¥ Download database structureâ€.

When clicked, open a password modal:

Message: â€œEnter the password to continue.â€

Valid password: Cari2230*

If the password is correct:

Generate a .sql file containing only the database structure (no data).

Automatically download it to the adminâ€™s browser.

Save a copy on the server under /server/backups/.

File name format: estructura_bd_<date>_<time>.sql

If incorrect:

Show â€œâŒ Incorrect password. Backup not generated.â€

On success:

Show â€œâœ… Database structure downloaded successfully.â€

ğŸ“œ Download History

Use the backup_logs table to record every backup:

File name

Admin user

Timestamp

Display these logs below the button in a table: Date and time | User | File.

ğŸ”’ Restrictions

Only admin/superadmin roles can access this tab.

Export structure only, not data.

Files must remain stored locally under /server/backups/.

ğŸ¨ Design

Keep the same visual style as the Configuration panel.

Add a database icon in the sidebar.

Display the history in a clean Card or DataTable component with pagination.

âœ… Final Goal:

Ensure all Configuration modules are fully functional.

Add the secure â€œData Baseâ€ tab for administrators.

Log every backup and store files correctly both on the server and in the interface.